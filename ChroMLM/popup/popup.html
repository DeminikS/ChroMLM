<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MLM Detector</title>
  <link rel="stylesheet" href="popup.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <!-- Header with logo -->
    <header class="app-header">
      <div class="logo">
        <span class="logo-text">MLM Detector</span>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="analysis">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 20L16.2223 16.2156M18.3158 11.1579C18.3158 15.0563 15.0563 18.3158 11.1579 18.3158C7.25939 18.3158 4 15.0563 4 11.1579C4 7.25939 7.25939 4 11.1579 4C15.0563 4 18.3158 7.25939 18.3158 11.1579Z"></path>
        </svg>
        <span>Analysis</span>
      </button>
      <button class="tab-btn" data-tab="history">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 8V12L14 14M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"></path>
        </svg>
        <span>History</span>
      </button>
      <button class="tab-btn" data-tab="stats">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M7 16V3M17 8V3M12 16V11M12 21H4.6C4.03995 21 3.75992 21 3.54601 20.891C3.35785 20.7951 3.20487 20.6422 3.10899 20.454C3 20.2401 3 19.9601 3 19.4V21M12 21H19.4C19.9601 21 20.2401 21 20.454 20.891C20.6422 20.7951 20.7951 20.6422 20.891 20.454C21 20.2401 21 19.9601 21 19.4V6.6C21 6.03995 21 5.75992 20.891 5.54601C20.7951 5.35785 20.6422 5.20487 20.454 5.10899C20.2401 5 19.9601 5 19.4 5H17.5M12 21V17M7 8H17"></path>
        </svg>
        <span>Stats</span>
      </button>
      <button class="tab-btn" data-tab="settings">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9.3951 19.3711L9.97955 21.1976C10.1533 21.7008 10.4858 22.1376 10.9329 22.4442C11.38 22.7508 11.9209 22.9111 12.4722 22.9017C13.0235 22.8923 13.5583 22.7137 13.9936 22.3919C14.4288 22.07 14.7438 21.6214 14.8972 21.1129L15.4816 19.2863C15.9098 19.1525 16.3241 18.9855 16.7201 18.787L18.6242 19.3989C19.1246 19.5563 19.662 19.5402 20.151 19.353C20.6401 19.1658 21.0539 18.8175 21.3346 18.3633C21.6152 17.9091 21.7491 17.3737 21.7154 16.8334C21.6817 16.293 21.4824 15.7788 21.1441 15.3633L19.931 13.7863C20.0135 13.3356 20.0558 12.8783 20.0558 12.4199C20.0558 11.9615 20.0135 11.5041 19.931 11.0535L21.1441 9.47648C21.4824 9.06095 21.6817 8.54671 21.7154 8.00636C21.7491 7.46602 21.6152 6.93063 21.3346 6.47644C21.0539 6.02225 20.6401 5.67398 20.151 5.48677C19.662 5.29955 19.1246 5.28345 18.6242 5.44081L16.7201 6.05269C16.3241 5.85421 15.9098 5.68718 15.4816 5.55339L14.8972 3.72679C14.7438 3.21832 14.4288 2.76969 13.9936 2.44784C13.5583 2.12599 13.0235 1.94743 12.4722 1.93804C11.9209 1.92865 11.38 2.08899 10.9329 2.39559C10.4858 2.70219 10.1533 3.13899 9.97955 3.64222L9.3951 5.46882C8.9669 5.6026 8.55266 5.76964 8.15659 5.96812L6.25251 5.35624C5.75215 5.19888 5.21469 5.21498 4.72566 5.4022C4.23662 5.58941 3.82282 5.93768 3.54217 6.39187C3.26152 6.84606 3.12759 7.38145 3.16129 7.9218C3.19499 8.46214 3.39436 8.97638 3.73251 9.39191L4.94568 10.9689C4.86314 11.4195 4.82087 11.8769 4.82087 12.3352C4.82087 12.7936 4.86314 13.251 4.94568 13.7016L3.73251 15.2785C3.39436 15.6941 3.19499 16.2083 3.16129 16.7486C3.12759 17.289 3.26152 17.8244 3.54217 18.2786C3.82282 18.7327 4.23662 19.081 4.72566 19.2682C5.21469 19.4554 5.75215 19.4715 6.25251 19.3141L8.15659 18.7023C8.55266 18.9007 8.9669 19.0678 9.3951 19.2016L9.3951 19.3711Z"/>
          <path d="M15 12.5C15 13.8807 13.8807 15 12.5 15C11.1193 15 10 13.8807 10 12.5C10 11.1193 11.1193 10 12.5 10C13.8807 10 15 11.1193 15 12.5Z"/>
        </svg>
        <span>Settings</span>
      </button>
    </nav>

    <!-- Tab Content -->
    <main class="tab-content">
      <!-- Analysis Tab -->
      <section class="tab-pane active" id="analysis-tab">
        <div class="current-post">
          <div class="post-info">
            <span id="post-id" class="post-id">Analyzing current post...</span>
          </div>
        </div>

        <div id="loading-container" class="loading-container">
          <div class="loader"></div>
          <p>Analyzing post content...</p>
        </div>

        <div id="result-container" class="result-container hidden">
          <div class="verdict-container">
            <div class="verdict-header">
              <div class="verdict-label">MLM Detected:</div>
              <div id="verdict" class="verdict-value">No</div>
            </div>
            <div class="certainty-meter">
              <div class="certainty-label">Certainty:</div>
              <div class="meter-container">
                <div id="certainty-bar" class="meter-bar"></div>
                <span id="certainty-value" class="meter-value">0%</span>
              </div>
            </div>
          </div>

          <div class="reasoning-container">
            <h3>Analysis Details</h3>
            <ul id="reasoning-list" class="reasoning-list"></ul>
          </div>
        </div>
      </section>

      <!-- History Tab -->
      <section class="tab-pane" id="history-tab">
        <div class="history-header">
          <h3>Analysis History</h3>
          <button id="clear-history" class="secondary-btn">Clear</button>
        </div>
        <div class="history-list-container">
          <div id="history-list" class="history-list">
            <!-- History items will be inserted here -->
          </div>
        </div>
      </section>

      <!-- Stats Tab -->
      <section class="tab-pane" id="stats-tab">
        <div class="stats-overview">
          <div class="stat-card">
            <span class="stat-value" id="mlm-percentage">0%</span>
            <span class="stat-label">MLM Posts Detected</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="total-analyzed">0</span>
            <span class="stat-label">Total Posts Analyzed</span>
          </div>
        </div>
        <div class="stats-chart-container">
          <h3>Detection Confidence Distribution</h3>
          <div class="chart-container">
            <div id="confidence-chart" class="confidence-chart">
              <!-- Chart will be rendered here -->
              <div class="chart-placeholder">
                <p>Analyze more posts to view statistics</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Settings Tab -->
      <section class="tab-pane" id="settings-tab">
        <div class="settings-container">
          <h3 class="settings-title">Widget Settings</h3>
          
          <div class="settings-section">
            <div class="settings-option">
              <div class="settings-label">Widget Visibility</div>
              <div class="toggle-switch">
                <input type="checkbox" id="widget-enabled" class="toggle-input">
                <label for="widget-enabled" class="toggle-label"></label>
              </div>
            </div>
            <div class="settings-description">Show the MLM detector widget on Instagram posts</div>
          </div>

          <div class="settings-section">
            <div class="settings-option">
              <div class="settings-label">Widget Position</div>
              <select id="widget-position" class="settings-select">
                <option value="bottom-right">Bottom Right</option>
                <option value="bottom-left">Bottom Left</option>
                <option value="top-right">Top Right</option>
                <option value="top-left">Top Left</option>
              </select>
            </div>
            <div class="settings-description">Choose where the widget appears on the page</div>
          </div>
          
          <div class="settings-section">
            <div class="settings-option">
              <div class="settings-label">Auto-Analyze Posts</div>
              <div class="toggle-switch">
                <input type="checkbox" id="auto-analyze" class="toggle-input">
                <label for="auto-analyze" class="toggle-label"></label>
              </div>
            </div>
            <div class="settings-description">Automatically analyze posts when you visit them</div>
          </div>
          
          <div class="settings-section">
            <div class="settings-option">
              <div class="settings-label">MLM Notification Level</div>
              <select id="notification-level" class="settings-select">
                <option value="all">All Results</option>
                <option value="mlm-only">MLM Posts Only</option>
                <option value="high-confidence">High Confidence Only (>70%)</option>
                <option value="none">None</option>
              </select>
            </div>
            <div class="settings-description">Choose when to display widget notifications</div>
          </div>
          
          <button id="save-settings" class="primary-btn">Save Settings</button>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <button id="show-widget-btn" class="icon-btn" title="Show Widget">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 14C4 14 5.5 16 12 16C18.5 16 20 14 20 14M12 13V9M18 9C18 4.5 12 2 12 2C12 2 6 4.5 6 9C6 13.5 9 16 12 16C15 16 18 13.5 18 9Z" />
        </svg>
      </button>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>